@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<ul id="product-list"></ul>

@section scripts{
    <script>
        let url = "https://localhost:7175/v1.0/products";
        let productList = document.getElementById("product-list");

        fetch(url)
        .then(res => res.json())
        .then(data => ShowProducts(data))
        .catch(ex => {
            alert("Error!");
            console.error(ex);
        });

        function ShowProducts(products){
            products.forEach(product =>{
                let li = document.createElement("li");
                let text = product.name + " | $" + product.price;

                li.appendChild(
                    document.createTextNode(text)
                );
                productList.appendChild(li);
            })
        }
    </script>
}
